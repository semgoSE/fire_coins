(this.webpackJsonpfire_coins=this.webpackJsonpfire_coins||[]).push([[0],{162:function(e,t,a){e.exports=a(271)},268:function(e,t,a){},271:function(e,t,a){"use strict";a.r(t);a(163),a(189),a(191),a(192),a(194),a(195),a(196),a(197),a(198),a(199),a(200),a(201),a(203),a(204),a(205),a(206),a(207),a(208),a(209),a(210),a(211),a(212),a(214),a(215),a(216),a(217),a(218),a(219),a(220),a(221),a(222),a(223),a(224),a(225),a(226),a(227),a(228),a(229),a(230),a(231);var n=a(0),r=a.n(n),l=a(101),i=a.n(l),s=a(45),c=a(36),o=a(102),u=a(103),d=a(121),m=a(120),f=a(3),h=(a(250),a(41),a(62)),p=a.n(h),E=a(114),g=a(32),b=a.n(g),v=(a(268),a(269),a(47)),_=a.n(v),k=a(37),y=a.n(k),S=a(115),C=a.n(S),T=a(116),j=a.n(T),z=a(117),w=a.n(z),O=a(118),F=a.n(O),M=(a(270),a(63)),x=a.n(M),P=a(119),R=a.n(P),D=a(64),J=a.n(D),I=a(65),N=a.n(I),A=a(38),V=a.n(A),W=new E.VKMiniAppAPI,G="https://api-waste.hhos.ru/fire_coins.api/",q=new URLSearchParams(window.location.search.slice(1)),B=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).init=function(e){console.log(e);var t=n.state,a=t.source,l=t.activeTab,i=t.id;n.setState({popout:r.a.createElement(f.A,null)}),b.a.post(G,JSON.stringify({event:"init",obj:{source:a+"_"+l,pin:e,id:i},url:window.location.href})).then((function(e){"ok"===e.data.status&&n.setState({popout:null,activePanel:"main",user:e.data.data}),n.setState({popout:null,snackbar:r.a.createElement(f.D,{onClose:function(){return n.setState({snackbar:null})},duration:2e3,before:"ok"===e.data.status?r.a.createElement(_.a,{fill:"var(--accent)"}):r.a.createElement(y.a,{fill:"var(--dynamic_red)"})},e.data.description)})}))},n.get_transfers=function(){var e=n.state,t=e.user,a=e.transfers_offset,l=e.transfers;b.a.post(G,JSON.stringify({event:"read_history",obj:{id:t.id,hash:t.hash}})),n.setState({activePanel:"transfers",is_load:!0,user:Object(c.a)(Object(c.a)({},t),{},{new_transfers:0})}),b.a.post(G,JSON.stringify({event:"get_transfers",obj:{id:t.id,hash:t.hash,offset:a}})).then((function(e){0!=e.data.length?n.setState({transfers_offset:a+1}):0==n.state.disabled&&n.setState({snackbar:r.a.createElement(f.D,{onClose:function(){return n.setState({snackbar:null})}},"\u0411\u043e\u043b\u044c\u0448\u0435 \u043d\u0435\u0442"),disabled:!0}),n.setState({is_load:!1,transfers:l.concat(e.data)})}))},n.onChange=function(e){var t=e.currentTarget,a=t.name,r=t.value;n.setState(Object(s.a)({},a,r))},n.tie=function(){var e=n.state.user;b.a.post(G,JSON.stringify({event:"tie_VK",obj:{id:e.id,hash:e.hash}})).then((function(e){console.log(e)}))},n.onRefresh=function(){var e=n.state.user;n.setState({feching:!0,transfers:[],transfers_offset:0}),b.a.post(G,JSON.stringify({event:"get_user_by_hash",obj:{id:e.id,hash:e.hash}})).then((function(e){"ok"==e.data.status?n.setState({user:e.data.data,feching:!1}):n.setState({snackbar:r.a.createElement(f.D,{onClose:function(){return n.setState({snackbar:null})},before:r.a.createElement(y.a,{fill:"var(--dynamic_red)"})},"\u041e\u0448\u0438\u0431\u043e\u0447\u043a\u0430")})}))},n.send=function(){n.setState({popout:r.a.createElement(f.A,null)});var e=n.state,t=e.user,a=e.peer_id,l=e.description,i=e.amount,s=e.source;"id"==n.state.activeTabTransfer?b.a.post(G,JSON.stringify({event:"transfer_by_id",obj:{from_id:t.id,hash:t.hash,peer_id:a,description:l,amount:i,source:s}})).then((function(e){n.setState({popout:null}),"ok"==e.data.status?n.setState({user:Object(c.a)(Object(c.a)({},t),{},{coins:t.coins-1e3*i}),activeModal:null,snackbar:r.a.createElement(f.D,{onClose:function(){return n.setState({snackbar:null})},before:r.a.createElement(_.a,{fill:"var(--accent)"}),duration:2e3},e.data.description)}):n.setState({activeModal:null,snackbar:r.a.createElement(f.D,{onClose:function(){return n.setState({snackbar:null})},before:r.a.createElement(y.a,{fill:"var(--dynamic_red)"}),duration:2e3},e.data.description)}),console.log(e.data.status)})):W.openCodeReader().then((function(e){console.log(e),b.a.post(G,JSON.stringify({event:"transfer_by_id",obj:{from_id:t.id,hash:t.hash,peer_id:e,description:l,amount:i,source:s}})).then((function(e){n.setState({popout:null}),"ok"==e.data.status?n.setState({user:Object(c.a)(Object(c.a)({},t),{},{coins:t.coins-1e3*i}),activeModal:null,snackbar:r.a.createElement(f.D,{onClose:function(){return n.setState({snackbar:null})},before:r.a.createElement(_.a,{fill:"var(--accent)"}),duration:2e3},e.data.description)}):n.setState({activeModal:null,snackbar:r.a.createElement(f.D,{onClose:function(){return n.setState({snackbar:null})},before:r.a.createElement(y.a,{fill:"var(--dynamic_red)"}),duration:2e3},e.data.description)})}))})).catch((function(e){n.setState({activeModal:null,snackbar:r.a.createElement(f.D,{onClose:function(){return n.setState({snackbar:null})},before:r.a.createElement(y.a,{fill:"var(--dynamic_red)"}),duration:2e3},"\u041e\u0448\u0438\u0431\u043e\u0447\u043a\u0430"),popout:null})}))},n.state={activePanel:"safe_pin",activeTab:"log_in",activeTabTransfer:"id",feching:!1,activeModal:null,user:null,userInfo:null,source:"web",id:"",pin:"",popout:null,snackbar:null,transfers:[],is_load:!0,transfers_offset:0,disabled:!1,amount:0,peer_id:0,description:0},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;W.initApp(),null!=q.get("vk_user_id")&&(this.setState({source:"vk"}),W.getUserInfo().then((function(t){e.setState({userInfo:t})})))}},{key:"parse",value:function(e){return(e/1e3).toString().replace(/(?=\B(?:\d{3})+(?!\d))/g," ").replace(".",",")}},{key:"render",value:function(){var e=this,t=this.state,a=t.activeTab,n=t.activeTabTransfer,l=t.transfers,i=t.user;return r.a.createElement(f.I,{activePanel:this.state.activePanel,popout:this.state.popout,modal:r.a.createElement(f.r,{activeModal:this.state.activeModal},r.a.createElement(f.p,{id:"transfer",dynamicContentHeight:!0,onClose:function(){return e.setState({activeModal:null})},header:r.a.createElement(f.q,null,"\u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438")},r.a.createElement(f.F,null,r.a.createElement(f.G,{selected:"id"==n,onClick:function(){return e.setState({activeTabTransfer:"id"})}},"\u041f\u043e \u043d\u043e\u043c\u0435\u0440\u0443"),r.a.createElement(f.G,{selected:"qr"==n,onClick:function(){return e.setState({activeTabTransfer:"qr"})}},"\u041f\u043e QR")),"id"==n?r.a.createElement(f.h,null,r.a.createElement(f.i,{top:"\u041d\u043e\u043c\u0435\u0440 \u0441\u0447\u0435\u0442\u0430"},r.a.createElement(f.n,{name:"peer_id",onChange:this.onChange,type:"number",value:this.state.peer_id})),r.a.createElement(f.i,{top:"\u0421\u0443\u043c\u043c\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430"},r.a.createElement(f.n,{name:"amount",onChange:this.onChange,value:this.state.amount,type:"number"})),r.a.createElement(f.i,{top:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435, \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"},r.a.createElement(f.H,{onChange:this.onChange,name:"description",description:this.state.description})),r.a.createElement(f.c,{size:"xl",mode:"outline",disabled:this.state.peer_id<=0||this.state.amount<=0,onClick:this.send},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")):r.a.createElement(f.h,null,"vk"!=this.state.source?r.a.createElement(f.j,{header:"\u041d\u0435\u0430\u043a\u0442\u0438\u0432\u043d\u043e",mode:"error"},"\u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u044d\u0442\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0432 VK mini apps"):null,r.a.createElement(f.i,{top:"\u0421\u0443\u043c\u043c\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430"},r.a.createElement(f.n,{name:"amount",onChange:this.onChange,value:this.state.amount,type:"number"})),r.a.createElement(f.i,{top:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435, \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"},r.a.createElement(f.H,{name:"description",onChange:this.onChange,value:this.state.description})),r.a.createElement(f.c,{size:"xl",mode:"outline",disabled:"vk"!=this.state.source||this.state.amount<=0,onClick:this.send},"\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))))},r.a.createElement(f.s,{id:"main"},r.a.createElement(f.t,{left:r.a.createElement(f.v,{onClick:this.get_transfers,label:null==i||0==i.new_transfers?null:r.a.createElement(f.f,{size:"s",mode:"prominent"},i.new_transfers)},r.a.createElement(F.a,null))},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),null==i?r.a.createElement(f.w,null):r.a.createElement(f.y,{isFetching:this.state.feching,onRefresh:this.onRefresh},r.a.createElement(f.l,{header:r.a.createElement(f.m,{mode:"secondary"},"\u0411\u0430\u043b\u0430\u043d\u0441")},r.a.createElement("div",{align:"center"},r.a.createElement("span",{style:{fontSize:30,fontWeight:"bold"}},this.parse(i.coins)),r.a.createElement("img",{src:V.a,style:{height:34,weight:34,position:"relative",top:3}})),r.a.createElement(f.e,{style:{marginTop:10}},r.a.createElement(f.d,{size:"s"},r.a.createElement(f.g,{align:"center"},r.a.createElement(j.a,{fill:"var(--accent)",onClick:function(){return e.setState({activeModal:"transfer"})}}))),r.a.createElement(f.d,{size:"s"},r.a.createElement(f.g,{align:"center"},r.a.createElement(C.a,{fill:"#F76F12"}))),r.a.createElement(f.d,{size:"s"},r.a.createElement(f.g,{align:"center"},r.a.createElement(w.a,{fill:"#F712C2"}))))),r.a.createElement(f.l,{header:r.a.createElement(f.m,{mode:"secondary"},"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043a\u043e\u0448\u0435\u043b\u044c\u043a\u0435")},r.a.createElement(f.C,{indicator:i.id,description:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439"},"\u041d\u043e\u043c\u0435\u0440 \u0441\u0447\u0435\u0442\u0430"),r.a.createElement(f.C,{indicator:1==i.is_orig?"\u0414\u0430":"\u041d\u0435\u0442"},"\u041a\u0430\u0440\u0442\u0430")),r.a.createElement(f.l,{header:r.a.createElement(f.m,{mode:"secondary"},"\u041f\u0440\u044f\u0437\u043a\u0430 \u0432\u043a")},null==i.vk_user_id?r.a.createElement(f.x,{action:r.a.createElement(f.c,{before:r.a.createElement(R.a,null),href:"https://vk.com/im?sel=-195552567",target:"_blank"},"\u041f\u0440\u044f\u0432\u044f\u0437\u0430\u0442\u044c")},"\u0421\u0447\u0435\u0442 \u043d\u0435 \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d \u043a \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0443 \u0412\u041a"):r.a.createElement(f.C,{before:r.a.createElement(f.a,{src:i.data.photo_200})},i.data.first_name+" "+i.data.last_name))),r.a.createElement(f.B,null),r.a.createElement(f.g,null,r.a.createElement(f.k,{slideWidth:"100%",style:{height:150},bullets:"dark"},r.a.createElement("div",null,r.a.createElement(f.b,{header:"FAQ Fire coin",subheader:"\u041e\u0442\u0432\u0435\u0442\u044b \u043d\u0430 \u0447\u0430\u0441\u0442\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b",mode:"image",actions:r.a.createElement(f.c,{mode:"overlay",size:"l"},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"),background:r.a.createElement("div",{style:{backgroundColor:"var(--accent)",backgroundImage:"url(".concat(V.a,")"),backgroundPosition:"right bottom",backgroundSize:100,backgroundRepeat:"no-repeat"}})})),r.a.createElement("div",null,r.a.createElement(f.b,{header:"\u0410\u043a\u0446\u0438\u044f! \u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e",subheader:r.a.createElement("span",null,"\u041f\u0440\u0438 \u0437\u0430\u043a\u0430\u0437\u0435 \u043d\u0430 \u0441\u0443\u043c\u043c\u0443 \u0431\u043e\u043b\u044c\u0448\u0435 200 Fire Coins"),mode:"image",actions:r.a.createElement(f.c,{mode:"overlay",size:"l"},"\u0412 \u043c\u0430\u0433\u0430\u0437\u0438\u043d"),background:r.a.createElement("div",{style:{backgroundColor:"#E73C0F",backgroundImage:"url(https://image.flaticon.com/icons/png/512/2928/2928783.png)",backgroundPosition:"95% bottom",backgroundSize:70,backgroundRepeat:"no-repeat"}})})))),this.state.snackbar),r.a.createElement(f.s,{id:"transfers"},r.a.createElement(f.t,{left:r.a.createElement(f.u,{onClick:function(){return e.setState({activePanel:"main",transfers:[],transfers_offset:0})}})},"\u0412\u0430\u0448\u0438 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438"),this.state.is_load&&0==this.state.transfers_offset?r.a.createElement(f.E,{size:"large",style:{color:"var(--accent)",marginTop:96}}):r.a.createElement("div",null,0==l.length?r.a.createElement(f.x,null,"\u0423 \u0432\u0430\u0441 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439"):r.a.createElement(f.o,null,r.a.createElement("div",null,l.map((function(e,t){return r.a.createElement("div",null,i.id==e.from_id?r.a.createElement(f.z,{key:t,multiline:!0,bottom:1==e.is_vk?r.a.createElement(N.a,{style:{marginTop:5},fill:"var(--accent)"}):r.a.createElement(J.a,{style:{marginTop:5},fill:"var(--accent)"}),before:r.a.createElement(f.a,{size:72,src:null==e.data.photo_200?null:e.data.photo_200},null==e.data.photo_200?r.a.createElement(x.a,{fill:"var(--accent)"}):null),after:r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:15,fontWeight:"bold",color:"var(--dynamic_red)"}},"-"+e.amount/1e3),r.a.createElement("img",{src:V.a,style:{height:24,weight:24,position:"relative",top:5}})),text:"0"==e.description?"":e.description},null==e.data.first_name?"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043d\u0430 \u0441\u0447\u0435\u0442 \u2116"+e.peer_id:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 "+e.data.first_name+" "+e.data.last_name):r.a.createElement(f.z,{key:t,multiline:!0,bottom:1==e.is_vk?r.a.createElement(N.a,{style:{marginTop:5},fill:"var(--accent)"}):r.a.createElement(J.a,{style:{marginTop:5},fill:"var(--accent)"}),before:r.a.createElement(f.a,{size:72,src:null==e.data.photo_200?null:e.data.photo_200},null==e.data.photo_200?r.a.createElement(x.a,{fill:"var(--accent)"}):null),after:r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:15,fontWeight:"bold",color:"var(--dynamic_green)"}},"+"+e.amount/1e3),r.a.createElement("img",{src:V.a,style:{height:24,weight:24,position:"relative",top:5}})),text:0==e.description?"":e.description},null==e.data.first_name?"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043e\u0442 \u0441\u0447\u0435\u0442\u0430 \u2116"+e.from_id:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043e\u0442 "+e.data.first_name+" "+e.data.last_name))}))),r.a.createElement(f.g,null,r.a.createElement(f.c,{size:"xl",onClick:this.get_transfers,disabled:this.state.is_load||this.state.disabled},this.state.is_load?r.a.createElement(f.E,null):"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435")))),this.state.snackbar),r.a.createElement(f.s,{id:"safe_pin",separator:!1},r.a.createElement(f.t,{separator:!1,left:r.a.createElement("img",{style:{height:40,weight:40},src:V.a})},"Fire coins"),"vk"==this.state.source?null:r.a.createElement(f.F,null,r.a.createElement(f.G,{selected:"log_in"===a,onClick:function(){return e.setState({activeTab:"log_in"})}},"\u0412\u0445\u043e\u0434"),r.a.createElement(f.G,{selected:"create"===a,onClick:function(){return e.setState({activeTab:"create"})}},"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435")),"create"===a||"vk"==this.state.source?r.a.createElement(f.g,{align:"center"},r.a.createElement(f.h,null,r.a.createElement(f.i,{top:"pin \u043a\u043e\u0434"},r.a.createElement(p.a,{length:4,initialValue:"",type:"numeric",secret:!0,style:{padding:"10px"},inputStyle:{borderColor:"var(--accent)",borderRadius:10,fontWeight:"bold"},inputFocusStyle:{borderColor:"var(--dynamic_green)"},onComplete:function(t,a){e.init(t)}})),r.a.createElement(f.b,{header:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435",subheader:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 pin \u043a\u043e\u0434. \u041d\u0435 \u0437\u0430\u0431\u044b\u0432\u0430\u0439\u0442\u0435 \u0435\u0433\u043e"}))):r.a.createElement(f.g,{align:"center"},r.a.createElement(f.h,null,r.a.createElement(f.i,{top:"\u041d\u043e\u043c\u0435\u0440 \u043a\u043e\u0448\u0435\u043b\u044c\u043a\u0430"},r.a.createElement(f.n,{onChange:this.onChange,name:"id",autoComplete:"off",type:"number"})),r.a.createElement(f.i,{top:"pin \u043a\u043e\u0434"},r.a.createElement(p.a,{length:4,initialValue:"",secret:!0,style:{padding:"10px"},inputStyle:{borderColor:"var(--accent)",borderRadius:10},inputFocusStyle:{borderColor:"var(--dynamic_green)"},onComplete:function(t,a){e.init(t)}})))),r.a.createElement("div",null,this.state.snackbar)))}}]),a}(r.a.Component);i.a.render(r.a.createElement(B,null),document.getElementById("root")),Promise.all([a.e(3),a.e(4)]).then(a.bind(null,275)).then((function(e){e.default}))},38:function(e,t,a){e.exports=a.p+"static/media/fire_coin.aec37865.png"}},[[162,1,2]]]);
//# sourceMappingURL=main.25986698.chunk.js.map