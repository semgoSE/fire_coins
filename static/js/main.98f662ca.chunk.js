(this.webpackJsonpfire_coins=this.webpackJsonpfire_coins||[]).push([[0],{166:function(e,t,a){e.exports=a(274)},274:function(e,t,a){"use strict";a.r(t);a(167),a(193),a(195),a(196),a(198),a(199),a(200),a(201),a(202),a(203),a(204),a(205),a(207),a(208),a(209),a(210),a(211),a(212),a(213),a(214),a(215),a(216),a(218),a(219),a(220),a(221),a(222),a(223),a(224),a(225),a(226),a(227),a(228),a(229),a(230),a(231),a(232),a(233),a(234),a(235);var n=a(0),r=a.n(n),l=a(98),i=a.n(l),c=a(42),o=a(59),s=a(99),u=a(100),m=a(120),d=a(119),p=a(3),f=(a(254),a(38),a(60)),h=a.n(f),E=a(111),v=a(35),g=a.n(v),_=(a(272),a(112)),b=a.n(_),y=a(113),k=a.n(y),S=a(114),C=a.n(S),w=a(115),T=a.n(w),j=a(116),z=a.n(j),O=a(117),x=a.n(O),P=(a(273),a(61)),F=a.n(P),J=a(118),M=a.n(J),B=a(62),A=a.n(B),I=a(44),N=a.n(I),V=new E.VKMiniAppAPI,q="https://api-waste.hhos.ru/fire_coins.api/",R=new URLSearchParams(window.location.search.slice(1)),W=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).init=function(e){console.log(e);var t=n.state,a=t.source,l=t.activeTab,i=t.id;n.setState({popout:r.a.createElement(p.w,null)}),g.a.post(q,JSON.stringify({event:"init",obj:{source:a+"_"+l,pin:e,id:i},url:window.location.href})).then((function(e){console.log(e),"ok"===e.data.status&&n.setState({popout:null,activePanel:"main",user:e.data.data}),n.setState({popout:null,snackbar:r.a.createElement(p.y,{onClose:function(){return n.setState({snackbar:null})},duration:2e3,before:"ok"===e.data.status?r.a.createElement(b.a,{fill:"var(--accent)"}):r.a.createElement(k.a,{fill:"var(--dynamic_red)"})},e.data.description)})}))},n.get_transfers=function(){var e=n.state.user;g.a.post(q,JSON.stringify({event:"read_history",obj:{id:e.id,hash:e.hash}})),n.setState({activePanel:"transfers",user:Object(o.a)(Object(o.a)({},e),{},{new_transfers:0})}),g.a.post(q,JSON.stringify({event:"get_transfers",obj:{id:e.id,hash:e.hash}})).then((function(e){console.log(e.data),n.setState({transfers:e.data})}))},n.get_friends=function(){n.setState({activeTabTransfer:"vk_user_id"});var e=n.state.user;V.getFriends().then((function(t){g.a.post(q,JSON.stringify({event:"transfer_by_vk_user_id",obj:{id:e.id,hash:e.hash,vk_user_id:t.id,amount:.001}})).then((function(e){console.log(e)}))}))},n.onChange=function(e){var t=e.currentTarget,a=t.name,r=t.value;n.setState(Object(c.a)({},a,r))},n.tie=function(){var e=n.state.user;g.a.post(q,JSON.stringify({event:"tie_VK",obj:{id:e.id,hash:e.hash}})).then((function(e){console.log(e)}))},n.state={activePanel:"safe_pin",activeTab:"log_in",activeTabTransfer:"id",activeModal:null,user:null,userInfo:null,source:"web",id:"",pin:"",popout:null,snackbar:null,transfers:null},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;V.initApp(),null!=R.get("vk_user_id")&&(this.setState({source:"vk"}),V.getUserInfo().then((function(t){e.setState({userInfo:t})})))}},{key:"parse",value:function(e){return(e/1e3).toString().replace(/(?=\B(?:\d{3})+(?!\d))/g," ").replace(".",",")}},{key:"render",value:function(){var e=this,t=this.state,a=t.activeTab,n=t.activeTabTransfer,l=t.transfers,i=t.user;return r.a.createElement(p.C,{activePanel:this.state.activePanel,popout:this.state.popout,modal:r.a.createElement(p.o,{activeModal:this.state.activeModal},r.a.createElement(p.n,{id:"transfer",dynamicContentHeight:!0,onClose:function(){return e.setState({activeModal:null})},header:r.a.createElement(p.A,null,r.a.createElement(p.B,{selected:"id"==n,onClick:function(){return e.setState({activeTabTransfer:"id"})}},"\u041f\u043e \u043d\u043e\u043c\u0435\u0440\u0443 \u0441\u0447\u0435\u0442\u0430"),"vk_log_in"!=this.state.source?r.a.createElement(p.B,{selected:"vk_user_id"==n,onClick:this.get_friends},"\u0412\u041a"):null)},"id"==n?r.a.createElement(p.h,null,r.a.createElement(p.i,{top:"\u041d\u043e\u043c\u0435\u0440 \u0441\u0447\u0435\u0442\u0430"},r.a.createElement(p.l,null)),r.a.createElement(p.c,{size:"xl"},"\u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438")):r.a.createElement(p.h,null,r.a.createElement(p.i,{top:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0443\u043c\u043c\u0443"},r.a.createElement(p.l,null)),r.a.createElement(p.c,{size:"xl"},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u0430"))))},r.a.createElement(p.p,{id:"main"},r.a.createElement(p.q,{left:r.a.createElement(p.s,{onClick:this.get_transfers,label:null==i||0==i.new_transfers?null:r.a.createElement(p.f,{size:"s",mode:"prominent"},i.new_transfers)},r.a.createElement(x.a,null))},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),null==i?r.a.createElement(p.t,null):r.a.createElement("div",null,r.a.createElement(p.j,{header:r.a.createElement(p.k,{mode:"secondary"},"\u0411\u0430\u043b\u0430\u043d\u0441")},r.a.createElement("div",{align:"center"},r.a.createElement("span",{style:{fontSize:30,fontWeight:"bold"}},this.parse(i.coins)),r.a.createElement("img",{src:N.a,style:{height:34,weight:34,position:"relative",top:3}})),r.a.createElement(p.e,{style:{marginTop:10}},r.a.createElement(p.d,{size:"s"},r.a.createElement(p.g,{align:"center"},r.a.createElement(T.a,{fill:"var(--accent)",onClick:function(){return e.setState({activeModal:"transfer"})}}))),r.a.createElement(p.d,{size:"s"},r.a.createElement(p.g,{align:"center"},r.a.createElement(C.a,{fill:"#F76F12"}))),r.a.createElement(p.d,{size:"s"},r.a.createElement(p.g,{align:"center"},r.a.createElement(z.a,{fill:"#F712C2"}))))),r.a.createElement(p.j,{header:r.a.createElement(p.k,{mode:"secondary"},"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043a\u043e\u0448\u0435\u043b\u044c\u043a\u0435")},r.a.createElement(p.x,{indicator:i.id,description:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439"},"\u041d\u043e\u043c\u0435\u0440 \u0441\u0447\u0435\u0442\u0430"),r.a.createElement(p.x,{indicator:1==i.is_orig?"\u0414\u0430":"\u041d\u0435\u0442"},"\u041a\u0430\u0440\u0442\u0430")),r.a.createElement(p.j,{header:r.a.createElement(p.k,{mode:"secondary"},"\u041f\u0440\u044f\u0437\u043a\u0430 \u0432\u043a")},null==i.vk_user_id?r.a.createElement(p.u,{action:r.a.createElement(p.c,{before:r.a.createElement(M.a,null),href:"https://oauth.vk.com/authorize?client_id=7473792&display=page&redirect_uri=http://localhost/tie.php&scope=&response_type=code&v=5.103",target:"_blank"},"\u041f\u0440\u044f\u0432\u044f\u0437\u0430\u0442\u044c")},"\u0421\u0447\u0435\u0442 \u043d\u0435 \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d \u043a \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0443 \u0412\u041a"):r.a.createElement(p.x,{before:r.a.createElement(p.a,{src:i.data.photo_200})},i.data.first_name+" "+i.data.last_name))),this.state.snackbar),r.a.createElement(p.p,{id:"transfers"},r.a.createElement(p.q,{left:r.a.createElement(p.r,{onClick:function(){return e.setState({activePanel:"main"})}})},"\u0412\u0430\u0448\u0438 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438"),null==l?r.a.createElement(p.z,{size:"large",style:{color:"var(--accent)",marginTop:96}}):r.a.createElement("div",null,0==l.length?r.a.createElement(p.u,null,"\u0423 \u0432\u0430\u0441 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439"):r.a.createElement(p.m,null,l.map((function(e,t){return r.a.createElement("div",null,i.id==e.from_id?r.a.createElement(p.v,{key:t,multiline:!0,bottom:1==e.is_vk?r.a.createElement(A.a,{fill:"var(--accent)"}):null,before:r.a.createElement(p.a,{size:72,src:null==e.data.photo_200?null:e.data.photo_200},null==e.data.photo_200?r.a.createElement(F.a,{fill:"var(--accent)"}):null),after:r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:15,fontWeight:"bold",color:"var(--dynamic_red)"}},"-"+e.amount/1e3),r.a.createElement("img",{src:N.a,style:{height:24,weight:24,position:"relative",top:5}})),caption:e.description},null==e.data.first_name?"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043d\u0430 \u0441\u0447\u0435\u0442 \u2116"+e.peer_id:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 "+e.data.first_name+" "+e.data.last_name):r.a.createElement(p.v,{key:t,multiline:!0,bottom:1==e.is_vk?r.a.createElement(A.a,{fill:"var(--accent)"}):null,before:r.a.createElement(p.a,{size:72,src:null==e.data.photo_200?null:e.data.photo_200},null==e.data.photo_200?r.a.createElement(F.a,{fill:"var(--accent)"}):null),after:r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:15,fontWeight:"bold",color:"var(--dynamic_green)"}},"+"+e.amount/1e3),r.a.createElement("img",{src:N.a,style:{height:24,weight:24,position:"relative",top:5}})),caption:e.description},null==e.data.first_name?"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043e\u0442 \u0441\u0447\u0435\u0442\u0430 \u2116"+e.peer_id:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043e\u0442 "+e.data.first_name+" "+e.data.last_name))}))))),r.a.createElement(p.p,{id:"safe_pin",separator:!1},r.a.createElement(p.q,{separator:!1},"Fire coins"),"vk"==this.state.source?null:r.a.createElement(p.A,null,r.a.createElement(p.B,{selected:"log_in"===a,onClick:function(){return e.setState({activeTab:"log_in"})}},"\u0412\u0445\u043e\u0434"),r.a.createElement(p.B,{selected:"create"===a,onClick:function(){return e.setState({activeTab:"create"})}},"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435")),"create"===a||"vk"==this.state.source?r.a.createElement(p.g,{align:"center"},r.a.createElement(p.h,null,r.a.createElement(p.i,{top:"pin \u043a\u043e\u0434"},r.a.createElement(h.a,{length:4,initialValue:"",secret:!0,type:"numeric",style:{padding:"10px"},inputStyle:{borderColor:"var(--accent)",borderRadius:10},inputFocusStyle:{borderColor:"var(--dynamic_green)"},onComplete:function(t,a){e.init(t)}})),r.a.createElement(p.b,{header:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435",subheader:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 pin \u043a\u043e\u0434. \u041d\u0435 \u0437\u0430\u0431\u044b\u0432\u0430\u0439\u0442\u0435 \u0435\u0433\u043e"}))):r.a.createElement(p.g,{align:"center"},r.a.createElement(p.h,null,r.a.createElement(p.i,{top:"\u041d\u043e\u043c\u0435\u0440 \u043a\u043e\u0448\u0435\u043b\u044c\u043a\u0430"},r.a.createElement(p.l,{onChange:this.onChange,name:"id",autoComplete:"off"})),r.a.createElement(p.i,{top:"pin \u043a\u043e\u0434"},r.a.createElement(h.a,{length:4,initialValue:"",secret:!0,type:"numeric",style:{padding:"10px"},inputStyle:{borderColor:"var(--accent)",borderRadius:10},inputFocusStyle:{borderColor:"var(--dynamic_green)"},onComplete:function(t,a){e.init(t)}})))),r.a.createElement("div",null,this.state.snackbar)))}}]),a}(r.a.Component);i.a.render(r.a.createElement(W,null),document.getElementById("root")),Promise.all([a.e(3),a.e(4)]).then(a.bind(null,278)).then((function(e){e.default}))},44:function(e,t,a){e.exports=a.p+"static/media/fire_coin.aec37865.png"}},[[166,1,2]]]);
//# sourceMappingURL=main.98f662ca.chunk.js.map